{"ast":null,"code":"import { useState, useEffect, useRef } from \"react\";\nexport default (url => {\n  const isCurrent = useRef(true);\n  const {\n    0: stats,\n    1: setStats\n  } = useState();\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(true);\n  const {\n    0: error,\n    1: setError\n  } = useState(\"\");\n  useEffect(() => {\n    return () => {\n      // called when the component is going to unmount\n      isCurrent.current = false;\n    };\n  }, []);\n\n  const getStats = async () => {\n    console.log(\"UseFetch invoked:\", url);\n    let data;\n\n    try {\n      let response = await fetch(url);\n      data = await response.json();\n      if (isCurrent.current) setStats(data);\n    } catch (err) {\n      setError(err);\n      setStats(null);\n    }\n\n    if (isCurrent.current) setLoading(false);\n  };\n\n  useEffect(() => {\n    if (url) getStats();\n  }, [url, setStats]);\n  return {\n    stats,\n    loading,\n    error\n  };\n}); // export default function Example() {\n//   const [data, dataSet] = useState(false);\n//   async function fetchMyAPI() {\n//     let response = await fetch(\"api/data\");\n//     response = await res.json();\n//     dataSet(response);\n//   }\n//   useEffect(() => {\n//     fetchMyAPI();\n//   }, []);\n//   return <div>{data}</div>;\n// }","map":null,"metadata":{},"sourceType":"module"}